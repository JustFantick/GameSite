function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function ibg(){let e=document.querySelectorAll(".ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),ibg();const popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=800;if(popupLinks.length>0)for(let e=0;e<popupLinks.length;e++){const t=popupLinks[e];t.addEventListener("click",(function(e){const o=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(o)),e.preventDefault()}))}const popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(let e=0;e<popupCloseIcon.length;e++){const t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))}function popupOpen(e){if(e&&unlock){const t=document.querySelector(".popup.open");t?popupClose(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e,t=!0){unlock&&(e.classList.remove("open"),t&&bodyUnlock())}function bodyLock(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(lockPadding.length>0)for(let t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("lock"),unlock=!1,setTimeout((function(){unlock=!0}),800)}function bodyUnlock(){setTimeout((function(){if(lockPadding.length>0)for(let e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("lock")}),800),unlock=!1,setTimeout((function(){unlock=!0}),800)}document.addEventListener("keydown",(function(e){if(27===e.which){popupClose(document.querySelector(".popup.open"))}}));const nav=document.querySelector(".header__tabs"),underline=document.querySelector(".underline");let initial=document.getElementsByClassName("initial")[0];function mouseOver(e){let t=e.offsetWidth,o=e.offsetLeft;underline.style.left=o+"px",underline.style.width=t+"px"}function mouseOut(e){let t=e.offsetWidth,o=e.offsetLeft;underline.style.left=o+"px",underline.style.width=t+"px"}mouseOut(initial),nav.addEventListener("mouseover",(function(e){let t=e.target.closest("li");t&&mouseOver(t)})),nav.addEventListener("mouseout",(function(e){e.target.closest("li");initial=document.getElementsByClassName("initial")[0],mouseOut(initial)})),nav.addEventListener("click",(function(e){let t=e.target.closest("li");if(!t||"Форум"==t.innerHTML)return;let o=document.getElementsByClassName("initial")[0];if(document.querySelector(".current").classList.remove("current"),o.classList.remove("initial"),t.classList.add("initial"),"Главная"==t.innerHTML){document.querySelectorAll(".main  > section")[0].classList.add("current")}else if("Новости"==t.innerHTML){let e=document.querySelectorAll(".main  > section");e[1].classList.add("current"),e[0].classList.contains("author")&&(e[1].style.cssText="max-height: 85vh;")}})),document.querySelectorAll(".tabs__links a").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const o=t.target.getAttribute("href").replace("#","");document.querySelectorAll(".tabs__links a").forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".tabs__item").forEach((e=>e.classList.remove("active"))),e.classList.add("active"),document.getElementById(o).classList.add("active")}))})),document.querySelector(".tabs__item")&&document.querySelector(".tabs__item").click(),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector("form button");document.querySelector("form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function o(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function n(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("click",(function(e){e.preventDefault(),0===function(e){let c=0,l=document.querySelectorAll("._req");for(const e of l){const l=e;o(l),l.classList.contains("_email")?n(l)&&(t(l),c++):("checkbox"===l.getAttribute("type")&&!1===l.checked||""===l.value)&&(t(l),c++)}return c}()&&(document.location.href="author.html")}))}));