function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function ibg(){let e=document.querySelectorAll(".ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),ibg(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".header__tabs"),t=document.querySelector(".underline");let n=document.getElementsByClassName("initial")[0];function o(e){let n=e.offsetWidth,o=e.offsetLeft;t.style.left=o+"px",t.style.width=n+"px"}o(n),e.addEventListener("mouseover",(function(e){let n=e.target.closest("li");n&&function(e){let n=e.offsetWidth,o=e.offsetLeft;t.style.left=o+"px",t.style.width=n+"px"}(n)})),e.addEventListener("mouseout",(function(e){e.target.closest("li");n=document.getElementsByClassName("initial")[0],o(n)})),e.addEventListener("click",(function(e){let t=e.target.closest("li");if(!t||"Форум"==t.innerHTML)return;let n=document.getElementsByClassName("initial")[0];if(document.querySelector(".current").classList.remove("current"),n.classList.remove("initial"),t.classList.add("initial"),"Главная"==t.innerHTML){document.querySelectorAll(".main  > section")[0].classList.add("current")}else if("Новости"==t.innerHTML){let e=document.querySelectorAll(".main  > section");e[1].classList.add("current"),e[0].classList.contains("author")&&(e[1].style.cssText="max-height: 85vh;")}})),document.querySelectorAll(".tabs__links a").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const n=t.target.getAttribute("href").replace("#","");document.querySelectorAll(".tabs__links a").forEach((e=>e.classList.remove("active"))),document.querySelectorAll(".tabs__item").forEach((e=>e.classList.remove("active"))),e.classList.add("active"),document.getElementById(n).classList.add("active")}))})),document.querySelector(".tabs__item")&&document.querySelector(".tabs__item").click();let c=document.querySelector("form button");document.querySelector("form");function l(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function i(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function s(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}c.addEventListener("click",(function(e){e.preventDefault(),0===function(e){let t=0,n=document.querySelectorAll("._req");for(const e of n){const n=e;i(n),n.classList.contains("_email")?s(n)&&(l(n),t++):("checkbox"===n.getAttribute("type")&&!1===n.checked||""===n.value)&&(l(n),t++)}return t}()&&(document.location.href="author.html")}));const r=document.querySelectorAll(".popup-link"),u=document.querySelector("body"),a=document.querySelectorAll(".lock-padding");let d=!0;const m=800;if(r.length>0)for(let e=0;e<r.length;e++){const t=r[e];t.addEventListener("click",(function(e){const n=t.getAttribute("href").replace("#","");p(document.getElementById(n)),e.preventDefault()}))}const f=document.querySelectorAll(".close-popup");if(f.length>0)for(let e=0;e<f.length;e++){const t=f[e];t.addEventListener("click",(function(e){g(t.closest(".popup")),e.preventDefault()}))}function p(e){if(e&&d){const t=document.querySelector(".popup.open");t?g(t,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(a.length>0)for(let t=0;t<a.length;t++){a[t].style.paddingRight=e}u.style.paddingRight=e,u.classList.add("lock"),d=!1,setTimeout((function(){d=!0}),m)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||g(e.target.closest(".popup"))}))}}function g(e,t=!0){d&&(e.classList.remove("open"),t&&(setTimeout((function(){if(a.length>0)for(let e=0;e<a.length;e++)a[e].style.paddingRight="0px";u.style.paddingRight="0px",u.classList.remove("lock")}),m),d=!1,setTimeout((function(){d=!0}),m)))}document.addEventListener("keydown",(function(e){if(27===e.which){g(document.querySelector(".popup.open"))}}))}));